var ModalBackground = (function () {
    function ModalBackground() {
    }
    ModalBackground.prototype.create = function (id) {
        var modalBackground = document.createElement('DIV');
        modalBackground.classList.add('o-modal__background');
        modalBackground.setAttribute('data-modal', id);
        modalBackground.setAttribute('onclick', "ModalController.hide('" + id + "')");
        return modalBackground;
    };
    ModalBackground.prototype.remove = function (id) {
        var modalBackground;
        if (this._isFrame())
            modalBackground = parent.document.querySelector("[data-modal=" + id + "]");
        else
            modalBackground = document.querySelector("[data-modal=" + id + "]");
        if (modalBackground != null && modalBackground != undefined)
            modalBackground.parentNode.removeChild(modalBackground);
    };
    ModalBackground.prototype._isFrame = function () {
        return parent.document.location != self.location;
    };
    return ModalBackground;
}());
var Modal = (function () {
    function Modal() {
        this._modalBackground = new ModalBackground();
    }
    Modal.prototype.hide = function (id) {
        var modal;
        this._removeBackground(id);
        if (this._isFrame())
            modal = parent.document.getElementById(id);
        else
            modal = document.getElementById(id);
        modal.classList.add('is-hide');
        modal.classList.remove('is-show');
    };
    Modal.prototype.show = function (id) {
        this._insertBackground(id);
        var modal = document.getElementById(id);
        modal.classList.add('is-show');
        modal.classList.remove('is-hide');
    };
    Modal.prototype._insertBackground = function (id) {
        var background = this._modalBackground.create(id);
        document.body.appendChild(background);
    };
    Modal.prototype._removeBackground = function (id) {
        this._modalBackground.remove(id);
    };
    Modal.prototype._isFrame = function () {
        return parent.document.location != self.location;
    };
    return Modal;
}());
var ModalController = (function () {
    function ModalController() {
        this._modal = new Modal();
    }
    ModalController.prototype.hide = function (id) {
        this._modal.hide(id);
        return this;
    };
    ModalController.prototype.show = function (id) {
        this._idModal = id;
        this._modal.show(id);
        return this;
    };
    return ModalController;
}());
var ControllerHelper = (function () {
    function ControllerHelper() {
    }
    ControllerHelper.allowController = function (child, controller) {
        var element = child;
        while (element.nodeName.toLowerCase() !== 'html') {
            if (element.getAttribute('data-controller') === controller)
                return true;
            element = element.parentNode;
        }
        return false;
    };
    return ControllerHelper;
}());
var Nav = (function () {
    function Nav() {
    }
    Nav.prototype.toggle = function (obj) {
        var target = obj.parentNode.getElementsByTagName('ul')[0] || obj.parentNode.getElementsByTagName('menu')[0];
        if (this._isHide(target) && this._hasController(obj))
            this._show(target);
        else
            this._hide(target);
    };
    Nav.prototype._show = function (obj) {
        obj.classList.remove('is-hide');
        obj.classList.add('is-show');
        obj.setAttribute('aria-expanded', 'true');
        obj.setAttribute('aria-hidden', 'false');
    };
    Nav.prototype._hide = function (obj) {
        obj.classList.remove('is-show');
        obj.classList.add('is-hide');
        obj.setAttribute('aria-expanded', 'false');
        obj.setAttribute('aria-hidden', 'true');
    };
    Nav.prototype._isHide = function (obj) {
        return obj.classList.contains('is-hide');
    };
    Nav.prototype._hasController = function (obj) {
        return ControllerHelper.allowController(obj, 'NavController');
    };
    return Nav;
}());
var NavController = (function () {
    function NavController() {
        this._nav = new Nav();
    }
    NavController.prototype.dropdown = function (link, event) {
        event.preventDefault();
        this._nav.toggle(link);
    };
    return NavController;
}());
var Tab = (function () {
    function Tab() {
    }
    Tab.prototype.toggle = function (obj) {
        if (!obj.classList.contains('is-active')) {
            this._isActiveTab(obj);
            this._showBody(obj);
        }
    };
    Tab.prototype._isActiveTab = function (obj) {
        this._isInactiveTab(obj.parentNode.parentNode.querySelector('.is-active'));
        obj.setAttribute('aria-selected', 'true');
        obj.classList.add('is-active');
    };
    Tab.prototype._isInactiveTab = function (obj) {
        obj.setAttribute('aria-selected', 'false');
        obj.classList.remove('is-active');
    };
    Tab.prototype._showBody = function (obj) {
        var body = this._findBody(obj);
        this._hideBody(body.parentNode.querySelector('.is-show'));
        body.setAttribute('aria-expanded', 'true');
        body.setAttribute('aria-hidden', 'false');
        body.classList.add('is-show');
        body.classList.remove('is-hide');
    };
    Tab.prototype._hideBody = function (obj) {
        obj.setAttribute('aria-expanded', 'false');
        obj.setAttribute('aria-hidden', 'true');
        obj.classList.add('is-hide');
        obj.classList.remove('is-show');
    };
    Tab.prototype._findBody = function (obj) {
        return obj.parentNode.parentNode.parentNode.querySelector(obj.getAttribute('href'));
    };
    return Tab;
}());
var TabController = (function () {
    function TabController() {
        this._tab = new Tab();
    }
    TabController.prototype.toggle = function (tab, event) {
        event.preventDefault();
        this._tab.toggle(tab);
    };
    return TabController;
}());
(function (classes) {
    classes.ModalController = ModalController;
    classes.NavController = NavController;
    classes.TabController = TabController;
})(window.classes || (window.classes = {}));
var StringFunction = (function () {
    function StringFunction() {
    }
    StringFunction.trimAll = function (string) {
        return string.replace(/\s/g, "");
    };
    StringFunction.trimLeft = function (string) {
        return string.replace(/^\s+/, "");
    };
    StringFunction.trimLeftRight = function (string) {
        return string.replace(/^\s+|\s+$/g, "");
    };
    StringFunction.trimRight = function (string) {
        return string.replace(/\s+$/, "");
    };
    return StringFunction;
}());
(function (document, window) {
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('[data-controller]').forEach(function (element) {
            var controller = StringFunction.trimAll(element.dataset.controller);
            var clazzes = controller.split(',');
            clazzes.forEach(function (clazz) {
                window[clazz] = new window.classes[clazz]();
            });
        });
    });
})(document, window);
